<html>
    <head>
        <title>Submitting a new link</title>
    </head>
    <body>
        <form method="post" action="http://localhost:9000/insertLink" onsubmit="sendData()">
            <p>
                URL
                <input name="url" value="https://beust.com"/>
            </p>

            <p>
                Title
                <input name="title" value="My web site"/>
            </p>
            <p>
                Comment
                <input name="comment" value="It's a great web site"/>
            </p>
            <div class="form-example">
                <input type="submit" value="Submit">
            </div>
        </form>
    </body>

<script>

    function sendData() {
        var data = {
            'url': document.location.href,
            'title': document.title,
            'comment': "Simple comment"
        };

        console.log('Sending data' + data);

        const XHR = new XMLHttpRequest();

        let urlEncodedData = "",
            urlEncodedDataPairs = [],
            name;

        // Turn the data object into an array of URL-encoded key/value pairs.
        for( name in data ) {
            urlEncodedDataPairs.push( encodeURIComponent( name ) + '=' + encodeURIComponent( data[name] ) );
        }

        // Combine the pairs into a single string and replace all %-encoded spaces to
        // the '+' character; matches the behaviour of browser form submissions.
        urlEncodedData = urlEncodedDataPairs.join( '&' ).replace( /%20/g, '+' );

        // Define what happens on successful data submission
        XHR.addEventListener( 'load', function(event) {
            alert( 'Yeah! Data sent and response loaded.' );
        } );

        // Define what happens in case of error
        XHR.addEventListener( 'error', function(event) {
            alert( 'Oops! Something went wrong.' );
        } );

        // Set up our request
        XHR.open('POST', 'http://localhost:9000/insertLink');

        // Add the required HTTP header for form data POST requests
        XHR.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');

        // Finally, send our data.
        XHR.send(urlEncodedData);
    }
</script>
</html>